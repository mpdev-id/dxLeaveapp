<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .endpoint {
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-bottom: 20px;
        }
        .endpoint .method {
            font-weight: bold;
            color: #2980b9;
        }
    </style>
</head>
<body>

    <h1>API Documentation</h1>

    <p>This documentation outlines the API endpoints and usage for different user roles within the dxLeaveApp system.</p>

    <!-- General Workflow -->
    <section>
        <h2>General Workflow</h2>
        <p>The general workflow for all users is as follows:</p>
        <ol>
            <li><strong>Register:</strong> Create a new user account.</li>
            <li><strong>Login:</strong> Authenticate to get an API token.</li>
            <li><strong>Use API:</strong> Access endpoints according to your role using the obtained token in the <code>Authorization</code> header as a Bearer token.</li>
            <li><strong>Logout:</strong> Invalidate the API token.</li>
        </ol>
    </section>

    <!-- Role: Member (Employee) -->
    <section>
        <h2>Role: Member (Employee)</h2>
        <p>This role is for standard employees. They can apply for leave and view their own leave history.</p>

        <h3>Endpoints:</h3>

        <div class="endpoint">
            <p><span class="method">POST</span> <code>/api/register</code></p>
            <p><strong>Description:</strong> Register a new user account.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">POST</span> <code>/api/login</code></p>
            <p><strong>Description:</strong> Login to get an authentication token.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">GET</span> <code>/api/user</code></p>
            <p><strong>Description:</strong> Fetch own user profile.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">POST</span> <code>/api/leave-requests</code></p>
            <p><strong>Description:</strong> Submit a new leave request.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">GET</span> <code>/api/leave-requests</code></p>
            <p><strong>Description:</strong> View own leave request history.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">POST</span> <code>/api/logout</code></p>
            <p><strong>Description:</strong> Logout and invalidate the token.</p>
        </div>
    </section>

    <!-- Role: Approvers (SPV, SL, ASMEN, TL, Manager) -->
    <section>
        <h2>Role: Approvers (SPV, SL, ASMEN, TL, Manager)</h2>
        <p>These roles have all the permissions of a Member, plus the ability to approve or reject leave requests.</p>

        <h3>Additional Endpoints:</h3>

        <div class="endpoint">
            <p><span class="method">GET</span> <code>/api/leave-requests</code></p>
            <p><strong>Description:</strong> View pending leave requests that require their approval.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">PATCH</span> <code>/api/leave-requests/{leaveRequest}/approve</code></p>
            <p><strong>Description:</strong> Approve or reject a leave request.</p>
            <p><strong>Parameters:</strong></p>
            <ul>
                <li><code>action</code> (required): 'Approved' or 'Rejected'.</li>
                <li><code>comments</code> (optional): A reason for the action.</li>
            </ul>
        </div>
    </section>

    <!-- Role: Super Admin -->
    <section>
        <h2>Role: Super Admin</h2>
        <p>The Super Admin has full access to the system, including managing master data.</p>

        <h3>Additional Endpoints (Prefix: <code>/api/admin/master</code>):</h3>

        <div class="endpoint">
            <p><span class="method">API Resource</span> <code>/departments</code></p>
            <p><strong>Description:</strong> Full CRUD for managing departments.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">API Resource</span> <code>/leave-types</code></p>
            <p><strong>Description:</strong> Full CRUD for managing leave types.</p>
        </div>

        <div class="endpoint">
            <p><span class="method">API Resource</span> <code>/public-holidays</code></p>
            <p><strong>Description:</strong> Full CRUD for managing public holidays.</p>
        </div>

    </section>

</body>
</html>