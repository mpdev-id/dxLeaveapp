<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DXLeave API Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 20px; }
        h1, h2, h3 { color: #2c3e50; }
        pre { background-color: #f4f4f4; padding: 15px; border-radius: 5px; white-space: pre-wrap; word-wrap: break-word; }
        code { font-family: "Courier New", Courier, monospace; }
        .endpoint { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .method { font-weight: bold; padding: 5px 10px; border-radius: 3px; color: white; display: inline-block; margin-bottom: 10px; }
        .post { background-color: #49cc90; }
        .get { background-color: #61affe; }
        .patch { background-color: #fca130; }
        .put { background-color: #fca130; }
        .delete { background-color: #f93e3e; }
        table { border-collapse: collapse; width: 100%; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <h1>DXLeave API Documentation</h1>
    <p>Dokumentasi ini menjelaskan cara menggunakan API DXLeave untuk berbagai peran pengguna.</p>

    <!-- =================================================================== -->
    <h2>1. Autentikasi</h2>
    <!-- =================================================================== -->
    <div class="endpoint">
        <p>Semua request ke API (kecuali login/register) harus menyertakan token autentikasi.</p>
        <h3>Login untuk Mendapatkan Token</h3>
        <p><span class="method post">POST</span> <code>/api/login</code></p>
        <h4>Request Body:</h4>
        <pre><code>{
    "email": "user@example.com",
    "password": "password"
}</code></pre>
        <h4>Response Sukses:</h4>
        <pre><code>{
    "meta": {
        "code": 200,
        "status": "success",
        "message": "Authenticated"
    },
    "data": {
        "access_token": "1|xxxxxxxxxxxxxxxxxxxxxxxxxxxx",
        "token_type": "Bearer",
        "user": { ... }
    }
}</code></pre>
        <h3>Header untuk Request Selanjutnya</h3>
        <p>Setelah mendapatkan token, semua request berikutnya harus menyertakan header berikut:</p>
        <pre><code>Accept: application/json
Authorization: Bearer &lt;YOUR_ACCESS_TOKEN&gt;</code></pre>
    </div>

    <!-- =================================================================== -->
    <h2>2. Peran: User (Karyawan)</h2>
    <!-- =================================================================== -->
    <div class="endpoint">
        <h3>Membuat Pengajuan Cuti Baru</h3>
        <p><span class="method post">POST</span> <code>/api/leave-requests</code></p>
        <h4>Deskripsi:</h4>
        <p>Endpoint ini digunakan oleh karyawan untuk mengajukan permintaan cuti baru.</p>
        <h4>Request Body:</h4>
        <table>
            <tr><th>Field</th><th>Tipe</th><th>Deskripsi</th></tr>
            <tr><td><code>leave_type_id</code></td><td>integer</td><td>ID dari jenis cuti yang diambil (e.g., 1 untuk Cuti Tahunan).</td></tr>
            <tr><td><code>start_date</code></td><td>string</td><td>Tanggal mulai cuti (Format: YYYY-MM-DD).</td></tr>
            <tr><td><code>end_date</code></td><td>string</td><td>Tanggal selesai cuti (Format: YYYY-MM-DD).</td></tr>
            <tr><td><code>reason</code></td><td>string</td><td>Alasan mengajukan cuti.</td></tr>
        </table>
        <h4>Contoh Body:</h4>
        <pre><code>{
    "leave_type_id": 1,
    "start_date": "2025-11-20",
    "end_date": "2025-11-21",
    "reason": "Ada keperluan keluarga mendadak."
}</code></pre>
    </div>

    <!-- =================================================================== -->
    <h2>3. Peran: Manager (Atasan)</h2>
    <!-- =================================================================== -->
    <div class="endpoint">
        <h3>Memberi Persetujuan/Penolakan Cuti</h3>
        <p><span class="method patch">PATCH</span> <code>/api/leave-requests/{id}/approve</code></p>
        <h4>Deskripsi:</h4>
        <p>Endpoint ini digunakan oleh atasan (Manager, SPV, dll.) untuk menyetujui atau menolak pengajuan cuti. Ganti <code>{id}</code> dengan ID dari pengajuan cuti yang relevan.</p>
        <h4>Request Body:</h4>
        <table>
            <tr><th>Field</th><th>Tipe</th><th>Deskripsi</th></tr>
            <tr><td><code>action</code></td><td>string</td><td>Aksi yang akan diambil. Harus berisi <code>"Approved"</code> atau <code>"Rejected"</code>.</td></tr>
            <tr><td><code>comments</code></td><td>string</td><td>(Opsional) Komentar atau catatan terkait keputusan.</td></tr>
        </table>
        <h4>Contoh Body (Menyetujui):</h4>
        <pre><code>{
    "action": "Approved",
    "comments": "Disetujui. Semoga lancar acaranya."
}</code></pre>
        <h4>Contoh Body (Menolak):</h4>
        <pre><code>{
    "action": "Rejected",
    "comments": "Ditolak karena bentrok dengan jadwal audit."
}</code></pre>
    </div>

    <!-- =================================================================== -->
    <h2>4. Peran: Super Admin</h2>
    <!-- =================================================================== -->
    <div class="endpoint">
        <h3>Mengelola Data Master</h3>
        <p>Super Admin bertanggung jawab untuk mengelola data master seperti Departemen, Jenis Cuti, dan Hari Libur. Semua endpoint ini berada di bawah prefix <code>/api/admin/master/</code> dan memerlukan peran <code>admin</code>.</p>
        
        <h3>Contoh: Pengelolaan Departemen</h3>
        
        <h4>Mendapatkan Semua Departemen</h4>
        <p><span class="method get">GET</span> <code>/api/admin/master/departments</code></p>

        <h4>Membuat Departemen Baru</h4>
        <p><span class="method post">POST</span> <code>/api/admin/master/departments</code></p>
        <pre><code>{
    "name": "Finance & Accounting"
}</code></pre>

        <h4>Mengubah Departemen</h4>
        <p><span class="method put">PUT</span> <code>/api/admin/master/departments/{id}</code></p>
        <pre><code>{
    "name": "Finance"
}</code></pre>

        <h4>Menghapus Departemen</h4>
        <p><span class="method delete">DELETE</span> <code>/api/admin/master/departments/{id}</code></p>

        <p>Pola yang sama berlaku untuk <code>/leave-types</code> dan <code>/public-holidays</code> dengan body yang disesuaikan dengan field masing-masing model.</p>
    </div>

</body>
</html>
